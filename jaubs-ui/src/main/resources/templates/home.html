<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
    <head>
        <meta charset="ISO-8859-1">
        <link rel="stylesheet" href="/css/bootstrap.min.css">
        <link rel="stylesheet" href="/css/jaubs.css">
        <script src="/js/bootstrap.min.js"></script>
        <title>Just Another Used Bookstore</title>
    </head>

    <body>
        <div class='container-fluid'>

            <!-- Insert common header for all pages -->
            <div th:insert="fragments/header :: header"/>

            <div class="row ms-1 mt-4">

                <!-- Show some of the User Information -->
                <div class="col-lg-5">

                    <table class="table table-striped table-bordered">

                        <thead>
                            <tr class="table-primary">
                                <th>Attribute</th>
                                <th>Value</th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr>
                                <td>Preferred Username</td>
                                <td><label th:text="${user.preferredUsername}"/></td>
                            </tr>

                            <tr>
                                <td>First Name</td>
                                <td><label th:text="${user.givenName}"/></td>
                            </tr>
                            <tr>
                                <td>Last Name</td>
                                <td><label th:text="${user.familyName}"/></td>
                            </tr>

                            <tr>
                                <td>Email</td>
                                <td><label th:text="${user.email}"/></td>
                            </tr>

                            <tr>
                                <td>Authorities</td>
                                <td><label th:text="${user.authorities}"/></td>
                            </tr>

                            <tr>
                                <td>Subject</td>
                                <td><label th:text="${user.subject}" /></td>
                            </tr>
                        </tbody>
                    </table>

                    <a th:href="@{/jaubs/ui/show-items}" class="btn btn-primary mb-3">Browse Used Books</a>

                </div>

                <div class="col">

                    <ul class="nav nav-tabs justify-content-center" id="tokenTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="access-tab" data-bs-toggle="tab" data-bs-target="#accesstoken"
                                    type="button" role="tab" aria-controls="accesstoken" aria-selected="true">
                                Access Token
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="id-tab" data-bs-toggle="tab" data-bs-target="#idtoken"
                                    type="button" role="tab" aria-controls="idtoken" aria-selected="false">
                                ID Token
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="refresh-tab" data-bs-toggle="tab" data-bs-target="#refreshtoken"
                                    type="button" role="tab" aria-controls="refreshtoken" aria-selected="false">
                                Refresh Token
                            </button>
                        </li>
                    </ul>

                    <div class="tab-content" id="tokenContent">

                        <!-- Show the base64 decoded Access Token -->
                        <div class="tab-pane fade show active" id="accesstoken" role="tabpanel" aria-labelledby="access-tab">
                            <textarea th:text="${accesstoken}" readonly rows="18" class="token" style="width:100%"/>
                        </div>

                        <!-- Show the base64 decoded ID Token -->
                        <div class="tab-pane fade" id="idtoken" role="tabpanel" aria-labelledby="id-tab">
                            <textarea th:text="${idtoken}" readonly rows="18" class="token" style="width: 100%"/>
                        </div>

                        <!-- Show the base64 decoded Refresh Token -->
                        <div class="tab-pane fade" id="refreshtoken" role="tabpanel" aria-labelledby="refresh-tab">
                            <textarea th:text="${refreshtoken}" readonly rows="18" class="token" style="width:100%"/>
                        </div>
                    </div>

                </div>
            </div>

        </div>
    </body>
</html>